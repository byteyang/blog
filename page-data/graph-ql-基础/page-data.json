{"componentChunkName":"component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-post-query-tsx","path":"/graph-ql-基础","result":{"data":{"post":{"__typename":"MdxPost","slug":"/graph-ql-基础","title":"GraphQL 基础","date":"20.03.2019","tags":[{"name":"GraphQL","slug":"graph-ql"}],"description":null,"body":"function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"GraphQL 基础\",\n  \"date\": \"2019-03-20T00:00:00.000Z\",\n  \"tags\": [\"GraphQL\"]\n};\n\nvar makeShortcode = function makeShortcode(name) {\n  return function MDXDefaultShortcode(props) {\n    console.warn(\"Component '\" + name + \"' was not imported, exported, or provided by MDXProvider as global scope\");\n    return mdx(\"div\", props);\n  };\n};\n\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"GraphQL \\u662F Facebook \\u5F00\\u6E90\\u7684\\u4E00\\u5957 API \\u67E5\\u8BE2\\u8BED\\u8A00\\u3002\\u975E\\u5E38\\u5E74\\u8F7B\\uFF0C\\u4ECE\\u5F00\\u6E90\\u5230\\u73B0\\u5728\\u53EA\\u6709 2-3 \\u5E74\\u7684\\u65F6\\u95F4\\uFF0C\\u56FD\\u5185\\u5916\\u7684\\u5E94\\u7528\\u4E5F\\u4E0D\\u7B97\\u5F88\\u591A\\u3002\\u4F46\\u7531\\u4E8E\\u5176\\u57FA\\u4E8E\\u7C7B\\u578B\\u7684\\u5B9A\\u4E49\\u548C\\u7075\\u6D3B\\u7684\\u67E5\\u8BE2\\u5F62\\u5F0F\\uFF0C\\u975E\\u5E38\\u9002\\u5408\\u5FEB\\u901F\\u8FED\\u4EE3\\u7684 Web \\u5E94\\u7528\\u3002\\u6B63\\u597D\\u516C\\u53F8\\u7684\\u9879\\u76EE\\u4E5F\\u5728\\u4F7F\\u7528 GraphQL \\u4F5C\\u4E3A API \\u7684\\u5B9A\\u4E49\\u548C\\u5B9E\\u73B0\\u5DE5\\u5177\\uFF0C\\u4E3A\\u4E86\\u52A0\\u6DF1\\u5BF9 GraphQL \\u7684\\u7406\\u89E3\\uFF0C\\u51B3\\u5B9A\\u5199\\u4E00\\u7CFB\\u5217\\u6587\\u7AE0\\u5B9E\\u8DF5 GraphQL \\u7684\\u5404\\u79CD\\u7279\\u6027\\u3002\"), mdx(\"p\", null, mdx(\"img\", _extends({\n    parentName: \"p\"\n  }, {\n    \"src\": \"https://i.loli.net/2019/01/21/5c44e5d847a84.png\",\n    \"alt\": \"graphql.png\"\n  }))), mdx(\"p\", null, \"\\u8FD9\\u7BC7\\u6587\\u7AE0\\u4E2D\\uFF0C\\u9996\\u5148\\u4F1A\\u7B80\\u5355\\u4ECB\\u7ECD GraphQL \\u7684\\u57FA\\u7840\\u6982\\u5FF5\\uFF1B\\u5728\\u8FD9\\u4E4B\\u540E\\uFF0C\\u6211\\u4EEC\\u4F1A\\u4EE5\\u4EE3\\u7801\\u793A\\u4F8B\\u6BD4\\u8F83 GraphQL \\u548C Restful API \\u7684\\u5B9E\\u73B0\\u5DEE\\u5F02\\uFF0C\\u91CD\\u70B9\\u4ECB\\u7ECD\\u5176\\u4E2D\\u7684 N+1 \\u95EE\\u9898\\u548C\\u7F13\\u5B58\\u90E8\\u5206\\uFF1B\\u6700\\u540E\\uFF0C\\u6211\\u7559\\u4E0B\\u4E86\\u4E00\\u4E9B\\u601D\\u8003\\u95EE\\u9898\\uFF0C\\u4F9B\\u5927\\u5BB6\\u53C2\\u8003\\u548C\\u53D1\\u6563\\u3002\"), mdx(\"h3\", null, \"\\u6982\\u5FF5\"), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"GraphQL \\u662F\\u4E00\\u4E2A\\u7528\\u4E8E API \\u7684\\u67E5\\u8BE2\\u8BED\\u8A00\\uFF0C\\u662F\\u4E00\\u4E2A\\u4F7F\\u7528\\u57FA\\u4E8E\\u7C7B\\u578B\\u7CFB\\u7EDF\\u6765\\u6267\\u884C\\u67E5\\u8BE2\\u7684\\u670D\\u52A1\\u7AEF\\u8FD0\\u884C\\u65F6\\uFF08\\u7C7B\\u578B\\u7CFB\\u7EDF\\u7531\\u4F60\\u7684\\u6570\\u636E\\u5B9A\\u4E49\\uFF09\\u3002GraphQL \\u5E76\\u6CA1\\u6709\\u548C\\u4EFB\\u4F55\\u7279\\u5B9A\\u6570\\u636E\\u5E93\\u6216\\u8005\\u5B58\\u50A8\\u5F15\\u64CE\\u7ED1\\u5B9A\\uFF0C\\u800C\\u662F\\u4F9D\\u9760\\u4F60\\u73B0\\u6709\\u7684\\u4EE3\\u7801\\u548C\\u6570\\u636E\\u652F\\u6491\\u3002\")), mdx(\"h4\", null, \"\\u67E5\\u8BE2\\u3001\\u53D8\\u66F4\\u548C\\u8BA2\\u9605 - Client\"), mdx(\"p\", null, \"\\u5728 GraphQL \\u4E2D\\u53EF\\u4EE5\\u8FDB\\u884C 3 \\u7C7B\\u64CD\\u4F5C\\uFF1A\\u67E5\\u8BE2\\u3001\\u53D8\\u66F4\\u548C\\u8BA2\\u9605\\uFF0C\\u8FD9 3 \\u7C7B\\u64CD\\u4F5C\\u7684\\u63CF\\u8FF0\\u7EDF\\u79F0\\u4E3A\\u67E5\\u8BE2\\u8BED\\u8A00(Query Language)\\uFF0C\\u5728\\u5BA2\\u6237\\u7AEF\\u4F7F\\u7528\\uFF0C\\u56CA\\u62EC\\u4E86\\u6570\\u636E\\u7684\\u8BFB\\u3001\\u5199\\u548C\\u5B9E\\u65F6\\u4F20\\u8F93\\u3002\\u67E5\\u8BE2\\u8BED\\u8A00\\u7531\\u7C7B\\u578B\\u548C\\u5B57\\u6BB5\\u7EC4\\u6210\\uFF0C\\u7C7B\\u578B\\u9700\\u8981\\u4E0E Server \\u7AEF\\u7684\\u5B9A\\u4E49\\u5B8C\\u5168\\u4E00\\u81F4\\uFF0C\\u5B57\\u6BB5\\u5219\\u53EF\\u4EE5\\u7531 Client \\u7AEF\\u81EA\\u7531\\u63A7\\u5236\\u3002\"), mdx(\"p\", null, mdx(\"img\", _extends({\n    parentName: \"p\"\n  }, {\n    \"src\": \"https://cdn-images-1.medium.com/max/1600/1*gLgBpni39kqad9C4QDOCVQ.png\",\n    \"alt\": null\n  }))), mdx(\"h4\", null, \"Schema \\u548C\\u7C7B\\u578B - Server\"), mdx(\"p\", null, \"\\u5728\\u670D\\u52A1\\u5668\\u7AEF\\uFF0CGraphQL \\u53EF\\u4EE5\\u5728 \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"schema\"), \" \\u4E2D\\u5B9A\\u4E49\\u4EE5\\u4E0B\\u7C7B\\u578B\\uFF1A\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"\\u6807\\u91CF \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"Scalar\"), mdx(\"ul\", {\n    parentName: \"li\"\n  }, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Int\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Float\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"String\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Boolean\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"ID\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"\\u81EA\\u5B9A\\u4E49\"))), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"\\u5BF9\\u8C61 \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"Object\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"\\u64CD\\u4F5C \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"Operation\"), mdx(\"ul\", {\n    parentName: \"li\"\n  }, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"\\u67E5\\u8BE2 \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"query\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"\\u53D8\\u66F4 \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"mutation\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"\\u8BA2\\u9605 \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"subscription\")))), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"\\u8F93\\u5165 \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"Input\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"\\u679A\\u4E3E \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"Enum\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"\\u63A5\\u53E3 \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"Interface\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"\\u8054\\u5408 \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"Union\"))), mdx(\"h4\", null, \"\\u5C0F\\u7ED3\"), mdx(\"p\", null, \"\\u7B80\\u5355\\u5730\\u8BF4\\uFF0C\\u6211\\u4EEC\\u4E00\\u822C\\u4F7F\\u7528\\u5BF9\\u8C61\\u7C7B\\u578B\\u5B9A\\u4E49\\u8D44\\u6E90\\uFF0C\\u5BF9\\u8C61\\u7684\\u5C5E\\u6027\\u53EF\\u4EE5\\u662F\\u6807\\u91CF\\u6216\\u5176\\u5B83\\u5BF9\\u8C61\\uFF1B\\u67E5\\u8BE2\\u7C7B\\u578B\\u7528\\u4E8E\\u5B9A\\u4E49\\u67E5\\u8BE2\\u7ED3\\u6784\\uFF0C\\u53EF\\u4EE5\\u4F20\\u5165\\u53C2\\u6570\\uFF1B\\u53D8\\u66F4\\u7C7B\\u578B\\u56E0\\u4E3A\\u6709\\u8F93\\u5165\\u503C\\uFF0C\\u4F7F\\u7528\\u8F93\\u5165\\u5BF9\\u8C61\\u5B9A\\u4E49\\u3002\\u9664\\u6807\\u91CF\\u4EE5\\u5916\\u7684\\u7C7B\\u578B\\uFF08\\u5305\\u62EC\\u81EA\\u5B9A\\u4E49\\u6807\\u91CF\\uFF09\\uFF0C\\u90FD\\u9700\\u8981\\u4E00\\u4E2A \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"resolver\"), \"\\uFF0C\\u76F4\\u5230\\u89E3\\u6790\\u4E3A\\u6807\\u91CF\\u4E3A\\u6B62\\u3002\"), mdx(\"p\", null, \"\\u66F4\\u52A0\\u8BE6\\u7EC6\\u7684\\u4ECB\\u7ECD\\u548C\\u5165\\u95E8\\u624B\\u518C\\u53EF\\u53C2\\u7167\", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://graphql.org/learn/\"\n  }), \"\\u5B98\\u65B9\\u6587\\u6863\"), \"\\u3002\"), mdx(\"h3\", null, \"GraphQL vs. Restful\"), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"\\u4E25\\u683C\\u6765\\u8BF4\\uFF0CGraphQL \\u4E0E Restful \\u5E76\\u4E0D\\u662F\\u540C\\u7EA7\\u522B\\u7684\\u89C4\\u8303\\u3002GraphQL \\u5B9A\\u4E49\\u4E86\\u4E00\\u79CD\\u65B0\\u7684\\u67E5\\u8BE2\\u8BED\\u8A00\\uFF0C\\u5E76\\u4EE5\\u6B64\\u4E3A\\u57FA\\u7840\\u5B9E\\u73B0 API\\uFF0C\\u8303\\u56F4\\u8D85\\u8FC7 Restful\\u3002\")), mdx(\"p\", null, \"\\u5728 GraphQL \\u63A8\\u51FA\\u4E4B\\u524D\\uFF0C\", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"\"\n  }), \"Restful\"), \" \\u662F\\u6700\\u6D41\\u884C\\u7684 API \\u8BBE\\u8BA1\\u89C4\\u8303\\u3002\\u6709\\u4E00\\u5F20\\u56FE\\u53EF\\u4EE5\\u5F62\\u8C61\\u7684\\u8868\\u793A\\u51FA GraphQL \\u548C Restful \\u7ED3\\u6784\\u4E0A\\u7684\\u533A\\u522B\\u3002\"), mdx(\"p\", null, mdx(\"img\", _extends({\n    parentName: \"p\"\n  }, {\n    \"src\": \"http://image.3001.net/images/20180910/1536549610_5b95e2ea4e7c9.png\",\n    \"alt\": null\n  }))), mdx(\"h4\", null, \"GraphQL \\u4F18\\u70B9\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Schema \\u548C Type \\u7CFB\\u7EDF\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"\\u6CA1\\u6709 Overfetching / Underfetching\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"\\u81EA\\u5E26\\u6570\\u636E\\u7ED3\\u6784\\u4E0E\\u6587\\u6863\\u7CFB\\u7EDF(GraphiQL)\")), mdx(\"h4\", null, \"GraphQL \\u7F3A\\u70B9\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"N+1 \\u67E5\\u8BE2\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"\\u7F13\\u5B58\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"schema \\u8BBE\\u8BA1\")), mdx(\"h3\", null, \"\\u4EE3\\u7801\\u793A\\u4F8B\"), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"Talk is cheap, show me the code\")), mdx(\"p\", null, \"\\u63A5\\u4E0B\\u5728\\u6211\\u7528\\u4E00\\u4E2A\\u7B80\\u5355 Web \\u5E94\\u7528\\uFF0C\\u6765\\u6F14\\u793A GraphQL \\u548C Restful \\u7684\\u533A\\u522B\\u3002\\u91CD\\u70B9\\u63CF\\u8FF0 N+1 \\u67E5\\u8BE2\\u548C\\u7F13\\u5B58\\u3002\\u6570\\u636E\\u5E93\\u7ED3\\u6784\\u5982\\u4E0B\\u56FE\\u6240\\u793A\\uFF0C\\u662F\\u4E00\\u4E2A\\u7B80\\u5355\\u7684\\u4E00\\u5BF9\\u591A\\u8868\\u5173\\u8054\\u3002\"), mdx(\"p\", null, mdx(\"img\", _extends({\n    parentName: \"p\"\n  }, {\n    \"src\": \"http://tuchuang.fate.ink/20190222093711_sbJHGh_Screenshot.png\",\n    \"alt\": null\n  }))), mdx(\"h4\", null, \"N+1 \\u67E5\\u8BE2\"), mdx(\"p\", null, \"N+1 \\u67E5\\u8BE2\\u662F\\u6307\\u5982\\u679C\\u4E3B\\u8868\\u4E0E\\u5173\\u8054\\u8868\\u662F 1 \\u5BF9 N \\u7684\\u5173\\u7CFB\\uFF0C\\u67E5\\u8BE2\\u4E3B\\u8868\\u6570\\u636E\\u65F6\\uFF0C\\u4F1A\\u901A\\u8FC7 N \\u6B21\\u67E5\\u8BE2\\u67E5\\u8BE2\\u5173\\u8054\\u8868\\u6570\\u636E\\u7684\\u60C5\\u51B5\\uFF0C\\u800C\\u5B9E\\u9645\\u4E0A\\u5173\\u8054\\u8868\\u7684\\u6700\\u4F73\\u67E5\\u8BE2\\u6B21\\u6570\\u53EA\\u9700 1 \\u6B21\\u3002\\u56E0\\u6B64 N+1 \\u67E5\\u8BE2\\u4F1A\\u52A0\\u91CD\\u6570\\u636E\\u5E93\\u7684\\u8D1F\\u8F7D\\uFF0C\\u5F71\\u54CD\\u6027\\u80FD\\u3002\"), mdx(\"p\", null, mdx(\"img\", _extends({\n    parentName: \"p\"\n  }, {\n    \"src\": \"http://tuchuang.fate.ink/20190222091953_4zO110_Screenshot.png\",\n    \"alt\": null\n  }))), mdx(\"p\", null, \"\\u573A\\u666F\\u5F88\\u7B80\\u5355\\uFF1A\\u67E5\\u8BE2\\u6240\\u6709 \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"user\"), \"\\uFF0C\\u5305\\u542B \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"user\"), \" \\u4E2D\\u7684 \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"post\")), mdx(\"h5\", null, \"Restful \\u7684\\u5904\\u7406\\u65B9\\u5F0F\"), mdx(\"p\", null, \"Restful \\u4E0B\\uFF0C\\u56E0\\u4E3A\\u662F\\u76F4\\u63A5\\u64CD\\u4F5C\\u6570\\u636E\\u5E93\\uFF0C\\u53EF\\u4EE5\\u6709 2 \\u79CD\\u65B9\\u5F0F\\uFF1A\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"1 \\u6B21\\u67E5\\u8BE2\\uFF0C\\u5728 SQL \\u4E2D\\u505A\\u5173\\u8054\"), mdx(\"pre\", {\n    parentName: \"li\"\n  }, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\"\n  }), \"// \\u901A\\u8FC7\\u6570\\u636E\\u5E93\\u5173\\u8054\\u67E5\\u8BE2\\nUser.findAllByDB = async function () {\\n  const users = await User.findAll({ include: ['posts'] })\\n\\n  return users\\n}\\n\")), mdx(\"p\", {\n    parentName: \"li\"\n  }, \"\\u8FD9\\u662F\\u6700\\u5E7F\\u6CDB\\u7684\\u7528\\u6CD5\\u3002\\u5728 ORM \\u7684\\u914D\\u5408\\u4E0B\\uFF0C\\u770B\\u8D77\\u6765\\u65E2\\u4EE3\\u7801\\u7B80\\u6D01\\uFF0C\\u4E5F\\u53EA\\u6709 1 \\u6B21\\u67E5\\u8BE2\\u3002\\u4F46\\u662F\\u8FD9\\u6837\\u5B9E\\u9645\\u662F\\u628A\\u538B\\u529B\\u8F6C\\u79FB\\u7ED9\\u4E86 SQL\\u3002\\u82E5\\u5173\\u8054\\u590D\\u6742\\uFF0C\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"join\"), \" \\u7684\\u64CD\\u4F5C\\u589E\\u591A\\uFF0C\\u6027\\u80FD\\u96BE\\u4EE5\\u638C\\u63A7\\u3002\")), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"\\u591A\\u6B21\\u67E5\\u8BE2\\uFF0C\\u5728\\u4EE3\\u7801\\u4E2D\\u505A\\u5173\\u8054\"), mdx(\"p\", {\n    parentName: \"li\"\n  }, \"\\u5982\\u679C\\u5728\\u7A0B\\u5E8F\\u4E2D\\u8FDB\\u884C\\u8868\\u5173\\u8054\\uFF0C\\u5219\\u907F\\u514D\\u4E86 \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"join\"), \" \\u590D\\u6742\\u5EA6\\u7684\\u95EE\\u9898\\u3002\\u4F46\\u662F\\uFF0CN+1 \\u67E5\\u8BE2\\u968F\\u4E4B\\u51FA\\u73B0\\u3002\"), mdx(\"pre\", {\n    parentName: \"li\"\n  }, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\"\n  }), \"// N+1 \\u590D\\u73B0\\n// \\u5373\\u4F7F\\u4F7F\\u7528 Promise.all\\uFF0C\\u4F9D\\u7136\\u8FDB\\u884C\\u4E86 N \\u6B21\\u6570\\u636E\\u5E93\\u67E5\\u8BE2\\nconst posts = await Promise.all(\\n  users.map((user) =>\\n    Post.find({\\n      where: {\\n        user_id: user.id,\\n      },\\n    })\\n  )\\n)\\n\")), mdx(\"p\", {\n    parentName: \"li\"\n  }, \"\\u53EF\\u4EE5\\u770B\\u5230\\uFF0C\\u5373\\u4F7F\\u4F7F\\u7528 Node.js \\u7684\\u795E\\u5668 \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Promise\"), \" \\u5E76\\u53D1\\u6267\\u884C\\u591A\\u6761\\u67E5\\u8BE2\\uFF0C\\u8FD4\\u56DE\\u7ED3\\u679C\\u7684\\u65F6\\u95F4\\u53EF\\u80FD\\u7F29\\u77ED\\uFF0C\\u4F46\\u5BF9\\u6570\\u636E\\u5E93\\u800C\\u8A00\\uFF0C\\u4ECD\\u7136\\u662F N+1 \\u6B21\\u67E5\\u8BE2\\u3002\\u6B63\\u786E\\u7684\\u89E3\\u51B3\\u65B9\\u5F0F\\u662F\\u4F7F\\u7528 \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"in\"), \" \\u62FC\\u6210\\u4E00\\u6761\\u67E5\\u8BE2\\uFF0C\\u90A3\\u4E48\\u603B\\u7684\\u67E5\\u8BE2\\u6B21\\u6570\\u53EA\\u6709 2 \\u6B21\\u3002\"), mdx(\"pre\", {\n    parentName: \"li\"\n  }, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\"\n  }), \"// N+1 \\u89E3\\u51B3\\u65B9\\u5F0F: \\u4F7F\\u7528 in \\u62FC\\u6210\\u4E00\\u6761\\u67E5\\u8BE2\\nconst posts = await Post.findAll({\\n  where: {\\n    user_id: {\\n      [Sequelize.Op.in]: users.map((user) => user.id),\\n    },\\n  },\\n})\\n\")))), mdx(\"h5\", null, \"GraphQL \\u7684\\u5904\\u7406\\u65B9\\u5F0F\"), mdx(\"p\", null, \"\\u5728 GraphQL \\u4E2D\\uFF0C\\u6BCF\\u4E2A \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"resolver\"), \" \\u53EA\\u80FD\\u89E3\\u6790 1 \\u79CD\\u5BF9\\u8C61\\uFF0C\\u56E0\\u6B64\\u5728\\u8FD9\\u4E2A\\u573A\\u666F\\u4E2D\\uFF0C\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"post\"), \" \\u53EA\\u80FD\\u901A\\u8FC7 \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"user_id\"), \" \\u9010\\u4E2A\\u83B7\\u53D6\\uFF0C100%\\u51FA\\u73B0 N+1 \\u67E5\\u8BE2\\u3002\\u66F4\\u60B2\\u60E8\\u7684\\u662F\\uFF0C\\u548C Restful \\u76F8\\u6BD4\\uFF0C\\u51FA\\u73B0 N+1 \\u67E5\\u8BE2\\u65F6\\u8FDE\\u4F7F\\u7528 \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Promise\"), \" \\u7684\\u673A\\u4F1A\\u90FD\\u6CA1\\u6709(\\u6342\\u8138)\\u3002\\u3002\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\"\n  }), \"Post.findAllByUserId = function(user_id) {\\n  // N+1 \\u590D\\u73B0\\n  // GraphQL \\u4E2D\\u7684 N+1 \\u8FDE\\u4F7F\\u7528 Promise.all \\u7684\\u673A\\u4F1A\\u90FD\\u6CA1\\u6709\\n  return await Post.find({ where: { user_id } });\\n};\\n\")), mdx(\"p\", null, \"\\u8FD8\\u597D Facebook \\u65E9\\u5DF2\\u610F\\u8BC6\\u5230\\u8FD9\\u4E2A\\u95EE\\u9898\\uFF0C\\u5F00\\u53D1\\u4E86 \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"DataLoader\"), \" \\u7528\\u4E8E GraphQL \\u4E0B\\u7684\\u5173\\u8054\\u67E5\\u8BE2\\u5904\\u7406\\u3002\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"DataLoader\"), \" \\u7684\\u539F\\u7406\\u662F\\u7F13\\u5B58\\u6BCF\\u6B21\\u67E5\\u8BE2\\u7684 \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"key\"), \"\\uFF0C\\u5728\\u6700\\u540E\\u4E00\\u5E76\\u5904\\u7406\\u3002\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\"\n  }), \"// DataLoader\\nasync function batchGetPosts(user_ids) {\\n  const posts = await Post.findAll({\\n    where: {\\n      user_id: {\\n        [Sequelize.Op.in]: user_ids,\\n      },\\n    },\\n  })\\n\\n  const results = []\\n  user_ids.forEach((user_id) => {\\n    results.push(posts.filter((post) => user_id === post.user_id))\\n  })\\n  return results\\n}\\nconst postLoader = new DataLoader((keys) => batchGetPosts(keys))\\n\\nPost.findAllByUserId = function (user_id) {\\n  // N+1 \\u89E3\\u51B3\\u65B9\\u5F0F: DataLoader\\n  return postLoader.load(user_id)\\n}\\n\")), mdx(\"h4\", null, \"\\u7F13\\u5B58\"), mdx(\"p\", null, \"Web \\u7CFB\\u7EDF\\u4E2D\\u7684\\u7F13\\u5B58\\u5E94\\u7528\\u5E7F\\u6CDB\\uFF0C\\u6709\\u4EE5\\u4E0B\\u51E0\\u7C7B\\uFF1A\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"\\u670D\\u52A1\\u7AEF\\u7F13\\u5B58\\uFF0C\\u4F8B\\u5982 \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"Memcache\"), \", \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"Redis\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"\\u7F51\\u7EDC\\u7F13\\u5B58\\uFF0C\\u4F8B\\u5982 \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"DNS\"), \", \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"CDN\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"\\u5BA2\\u6237\\u7AEF\\u7F13\\u5B58\\uFF0C\\u4F8B\\u5982\\u6D4F\\u89C8\\u5668\\u7F13\\u5B58\")), mdx(\"p\", null, \"\\u672C\\u7BC7\\u53EA\\u8BA8\\u8BBA GraphQL \\u548C Restful \\u5728\\u6D4F\\u89C8\\u5668\\u7F13\\u5B58\\u7684\\u533A\\u522B\\u4E0E\\u5E94\\u7528\\u3002\"), mdx(\"h5\", null, \"\\u6D4F\\u89C8\\u5668(Http)\\u7F13\\u5B58\\u7B80\\u4ECB\"), mdx(\"p\", null, mdx(\"img\", _extends({\n    parentName: \"p\"\n  }, {\n    \"src\": \"https://user-gold-cdn.xitu.io/2019/1/21/1686e2735297a596\",\n    \"alt\": null\n  }))), mdx(\"p\", null, \"\\u6D4F\\u89C8\\u5668\\u7F13\\u5B58\\u5206 2 \\u79CD\\uFF1A\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"\\u5F3A\\u7F13\\u5B58\", mdx(\"ul\", {\n    parentName: \"li\"\n  }, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Expires\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Cache-Control\"))), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"\\u534F\\u5546\\u7F13\\u5B58\", mdx(\"ul\", {\n    parentName: \"li\"\n  }, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Last-Modify/If-Modify-Since\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"ETag/If-None-Match\")))), mdx(\"h5\", null, \"Restful \\u7F13\\u5B58\\u5B9E\\u73B0\"), mdx(\"p\", null, \"Restful \\u53EF\\u4EE5\\u501F\\u52A9 HTTP \\u89C4\\u8303\\u5F88\\u7B80\\u5355\\u5730\\u5B9E\\u73B0\\u6D4F\\u89C8\\u5668\\u7F13\\u5B58\\u3002\\u8FD9\\u91CC\\u6211\\u4F7F\\u7528\\u4E86\\u5F3A\\u7F13\\u5B58: \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Cache-Control\"), \"\\uFF0C\\u53EA\\u9700\\u5728\\u670D\\u52A1\\u7AEF\\u8FD4\\u56DE\\u7684 \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Response\"), \" \\u4E0A\\u52A0\\u5165 \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Header\"), \" \\u5373\\u53EF\\u3002\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\"\n  }), \"router.get(\\\"/users\\\", async ctx => {\\n  // \\u544A\\u77E5\\u6D4F\\u89C8\\u5668\\u4F7F\\u7528\\u7F13\\u5B58\\uFF0C\\u65F6\\u957F20\\u79D2\\n  ctx.set({\\n    \\\"Cache-Control\\\": \\\"max-age=20\\\"\\n  });\\n\\n  ......\\n}\\n\")), mdx(\"p\", null, \"\\u8FD0\\u884C\\u7ED3\\u679C\\uFF0C\\u53D6\\u6D88 chrome \\u63A7\\u5236\\u53F0\\u4E2D\\u7684 \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Disable Cache\"), \" \\u9009\\u9879\\u3002\\u53EF\\u4EE5\\u770B\\u5230\\uFF0C\\u7B2C\\u4E00\\u6B21\\u662F\\u4ECE\\u670D\\u52A1\\u5668\\u62FF\\u56DE\\u6570\\u636E\\uFF0C\\u6709 Size \\u5927\\u5C0F\\uFF1B\\u63A5\\u7740\\u51E0\\u6B21\\u8BF7\\u6C42\\u7684 Size \\u4E3A \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"from disk cache\"), \"\\uFF0C\\u8BC1\\u660E\\u4ECE\\u7F13\\u5B58\\u62FF\\u56DE\\u6570\\u636E\\uFF1B\\u6700\\u540E\\u4E00\\u4E2A\\u8BF7\\u6C42\\u540C\\u6837\\u6709 Size \\u5927\\u5C0F\\uFF0C\\u8BC1\\u660E\\u7F13\\u5B58\\u5931\\u6548\\u3002\"), mdx(\"p\", null, mdx(\"img\", _extends({\n    parentName: \"p\"\n  }, {\n    \"src\": \"http://tuchuang.fate.ink/20190222103136_tP7IcH_Screenshot.png\",\n    \"alt\": null\n  }))), mdx(\"h5\", null, \"GraphQL \\u7F13\\u5B58\\u5B9E\\u73B0\"), mdx(\"p\", null, \"GraphQL \\u53EF\\u5426\\u50CF Restful \\u4E00\\u6837\\uFF0C\\u5728\\u670D\\u52A1\\u7AEF\\u6DFB\\u52A0\\u4E2A \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Header\"), \" \\u5C31\\u89E3\\u51B3\\u95EE\\u9898\\uFF1F\\u9057\\u61BE\\uFF0C\\u5E76\\u4E0D\\u80FD\\u3002Restful \\u7684 URL \\u662F\\u552F\\u4E00\\u7684\\uFF0C\\u56E0\\u6B64\\u53EF\\u4EE5\\u4F5C\\u4E3A Key \\u8F7B\\u677E\\u5B9E\\u73B0\\u7F13\\u5B58\\uFF1B\\u4F46 GraphQL \\u53EA\\u6709\\u4E00\\u4E2A URL\\uFF0C\\u8BE5\\u5982\\u4F55\\u5B9E\\u73B0\\u7F13\\u5B58\\uFF1F\"), mdx(\"p\", null, \"\\u7ECF\\u8FC7\\u8C03\\u7814\\uFF0C\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"apollo-client\"), \" \\u4E0B\\u7684\\u4E00\\u4E2A\\u5305: \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"apollo-cache-inmemory\"), \" \\u53EF\\u4EE5\\u5B9E\\u73B0 GraphQL \\u5728\\u6D4F\\u89C8\\u5668\\u7AEF\\u7684\\u7F13\\u5B58\\u3002\\u4F7F\\u7528\\u7684\\u65B9\\u5F0F\\u4E5F\\u5F88\\u7B80\\u5355\\uFF1A\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\"\n  }), \"import ApolloClient from 'apollo-boost'\\nconst cache = new InMemoryCache()\\nconst client = new ApolloClient({\\n  uri: 'http://localhost:4000/graphql',\\n  cache,\\n})\\n\")), mdx(\"p\", null, \"\\u8FD9\\u6837\\u7531\\u8FD9\\u4E2A \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"client\"), \" \\u53D1\\u51FA\\u7684\\u6BCF\\u4E2A\\u8BF7\\u6C42\\u90FD\\u4F1A\\u88AB\\u6D4F\\u89C8\\u5668\\u7F13\\u5B58\\u3002\\u4F46\\u662F\\u6709\\u4E2A\\u95EE\\u9898\\uFF0C\\u8FC7\\u671F\\u65F6\\u95F4\\u5728\\u54EA\\u91CC\\u8BBE\\u7F6E\\uFF1F\\u76EE\\u524D\\u8FD9\\u4E2A\\u95EE\\u9898\\u6211\\u8FD8\\u6CA1\\u6709\\u627E\\u5230\\u7B54\\u6848\\uFF0C\\u6709\\u4E00\\u4E2A\\u5C1A\\u672A\\u5173\\u95ED\\u7684 \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/apollographql/apollo-feature-requests/issues/4\"\n  }), \"Issue\"), \"\\uFF0C\\u53EF\\u80FD\\u8DDF\\u8E2A\\u4E0B\\u4F1A\\u6709\\u5E2E\\u52A9\\u3002\"), mdx(\"h3\", null, \"\\u601D\\u8003\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"GraphQL Schema \\u8BBE\\u8BA1\\u7684\\u6700\\u4F73\\u5B9E\\u8DF5\\uFF1F\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"\\u6D4F\\u89C8\\u5668\\u7AEF\\u7F13\\u5B58\\u7684\\u4F7F\\u7528\\u573A\\u666F\\uFF1F\\u5982\\u4F55\\u8BBE\\u8BA1\\uFF1F\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"\\u52A0\\u5F3A \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"apollo-client\"), \" \\u7684\\u5E94\\u7528\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"\\u5B66\\u4E60 Github\")), mdx(\"h3\", null, \"\\u53C2\\u8003\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://graphql.org/\"\n  }), \"GraphQL | A query language for your API\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://www.apollographql.com/docs/apollo-server/\"\n  }), \"Apollo Server\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://www.howtographql.com/\"\n  }), \"How To GraphQL\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://blog.apollographql.com/the-anatomy-of-a-graphql-query-6dffa9e9e747\"\n  }), \"The Anatomy of a GraphQL Query\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://graphqlmastery.com/blog/graphql-best-practices-for-graphql-schema-design\"\n  }), \"GraphQL best practices for GraphQL schema design\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://draveness.me/graphql-microservice\"\n  }), \"GraphQL \\u5728\\u5FAE\\u670D\\u52A1\\u67B6\\u6784\\u4E2D\\u7684\\u5B9E\\u8DF5\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://juejin.im/post/5c4528a6f265da611a4822cc\"\n  }), \"\\u5B9E\\u8DF5\\u8FD9\\u4E00\\u6B21,\\u5F7B\\u5E95\\u641E\\u61C2\\u6D4F\\u89C8\\u5668\\u7F13\\u5B58\\u673A\\u5236\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://www.zhihu.com/question/40035517\"\n  }), \"\\u524D\\u7AEF\\u5982\\u4F55\\u66F4\\u597D\\u7684\\u5B9E\\u73B0\\u63A5\\u53E3\\u7684\\u7F13\\u5B58\\u548C\\u66F4\\u65B0\"))));\n}\n;\nMDXContent.isMDXComponent = true;","excerpt":"GraphQL 是 Facebook 开源的一套 API 查询语言。非常年轻，从开源到现在只有 2-3 年的时间，国内外的应用也不算很多。但由于其基于类型的定义和灵活的查询形式，非常适合快速迭代的 Web 应用。正好公司的项目也在使用 GraphQL 作为 API…","timeToRead":2,"banner":null}},"pageContext":{"slug":"/graph-ql-基础","formatString":"DD.MM.YYYY"}},"staticQueryHashes":["318001574","3787687951","3787687951"]}